title: Schema for Global Jenkins configuration
type: object
additionalProperties: false
properties:
  admin_email:
    description: |
      Notification e-mails from Jenkins to project owners will be sent
      with this address in the from header.
    type: string

  markup_format:
    enum: ["plain-text", "raw-html", "unsafe"]
    description: |
      Markup formatter allows to use Raw HTML, Plain Text or unsafe markup
      for jobs, views descriptions.
    type: string

  num_of_executors:
    description: Number of executors for Master node.
    type: number

  scm_checkout_retry_count:
    description: |
      If a build fails to checkout from the repository, Jenkins will retry
      the specified number of times before giving up.
    type: number

  security_type:
    enum: ["password", "unsecured"]
    description: |
      Security strategy for Jenkins master. 'Password' requires 'admin_user'
      array and will setup password based matrix authorization strategy and
      create admin user with full set of permissions. 'Unsecured' will leave
      Jenkins without security strategy and providing full control to any
      anonymous user.
    type: string

  admin_user:
    type: array
    additionalItems: false
    items:
      type: object
      properties:
        username:
          description: Username of the admin user.
          type: string
        password:
          description: Admin user password.
          type: string
        public_key:
          description: Admin user SSH public key.
          type: string
        email:
          description: Admin user email.
          type: string
        name:
          description: Full name of the admin user.
          type: string
    required:
      - username
      - password
      - public_key
      - email
      - name

required:
- admin_email
- markup_format
- num_of_executors
- scm_checkout_retry_count
- security_type
